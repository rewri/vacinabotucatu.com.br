!function (t) { "use strict"; "function" == typeof define && define.amd ? define(["jquery"], t) : t(jQuery) }(function (t) { "use strict"; var e = [], s = [], i = { precision: 100, elapse: !1 }; s.push(/^[0-9]*$/.source), s.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source), s.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source), s = new RegExp(s.join("|")); var n = { Y: "years", m: "months", n: "daysToMonth", w: "weeks", d: "daysToWeek", D: "totalDays", H: "hours", M: "minutes", S: "seconds" }; function a(t, e) { var s = "s", i = ""; return t && (1 === (t = t.replace(/(:|;|\s)/gi, "").split(/\,/)).length ? s = t[0] : (i = t[0], s = t[1])), 1 === Math.abs(e) ? i : s } var o = function (s, n, a) { this.el = s, this.$el = t(s), this.interval = null, this.offset = {}, this.options = t.extend({}, i), this.instanceNumber = e.length, e.push(this), this.$el.data("countdown-instance", this.instanceNumber), a && ("function" == typeof a ? (this.$el.on("update.countdown", a), this.$el.on("stoped.countdown", a), this.$el.on("finish.countdown", a)) : this.options = t.extend({}, i, a)), this.setFinalDate(n), this.start() }; t.extend(o.prototype, { start: function () { null !== this.interval && clearInterval(this.interval); var t = this; this.update(), this.interval = setInterval(function () { t.update.call(t) }, this.options.precision) }, stop: function () { clearInterval(this.interval), this.interval = null, this.dispatchEvent("stoped") }, toggle: function () { this.interval ? this.stop() : this.start() }, pause: function () { this.stop() }, resume: function () { this.start() }, remove: function () { this.stop.call(this), e[this.instanceNumber] = null, delete this.$el.data().countdownInstance }, setFinalDate: function (t) { this.finalDate = function (t) { if (t instanceof Date) return t; if (String(t).match(s)) return String(t).match(/^[0-9]*$/) && (t = Number(t)), String(t).match(/\-/) && (t = String(t).replace(/\-/g, "/")), new Date(t); throw new Error("Couldn't cast `" + t + "` to a date object.") }(t) }, update: function () { if (0 !== this.$el.closest("html").length) { var e, s = void 0 !== t._data(this.el, "events"), i = new Date; e = this.finalDate.getTime() - i.getTime(), e = Math.ceil(e / 1e3), e = !this.options.elapse && e < 0 ? 0 : Math.abs(e), this.totalSecsLeft !== e && s && (this.totalSecsLeft = e, this.elapsed = i >= this.finalDate, this.offset = { seconds: this.totalSecsLeft % 60, minutes: Math.floor(this.totalSecsLeft / 60) % 60, hours: Math.floor(this.totalSecsLeft / 60 / 60) % 24, days: Math.floor(this.totalSecsLeft / 60 / 60 / 24) % 7, daysToWeek: Math.floor(this.totalSecsLeft / 60 / 60 / 24) % 7, daysToMonth: Math.floor(this.totalSecsLeft / 60 / 60 / 24 % 30.4368), totalDays: Math.floor(this.totalSecsLeft / 60 / 60 / 24), weeks: Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 7), months: Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 30.4368), years: Math.abs(this.finalDate.getFullYear() - i.getFullYear()) }, this.options.elapse || 0 !== this.totalSecsLeft ? this.dispatchEvent("update") : (this.stop(), this.dispatchEvent("finish"))) } else this.remove() }, dispatchEvent: function (e) { var s, i = t.Event(e + ".countdown"); i.finalDate = this.finalDate, i.elapsed = this.elapsed, i.offset = t.extend({}, this.offset), i.strftime = (s = this.offset, function (t) { var e, i, o = t.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi); if (o) for (var h = 0, l = o.length; h < l; ++h) { var r = o[h].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/), c = (e = r[0], i = void 0, i = e.toString().replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1"), new RegExp(i)), f = r[1] || "", u = r[3] || "", p = null; r = r[2], n.hasOwnProperty(r) && (p = n[r], p = Number(s[p])), null !== p && ("!" === f && (p = a(u, p)), "" === f && p < 10 && (p = "0" + p.toString()), t = t.replace(c, p.toString())) } return t = t.replace(/%%/, "%") }), this.$el.trigger(i) } }), t.fn.countdown = function () { var s = Array.prototype.slice.call(arguments, 0); return this.each(function () { var i = t(this).data("countdown-instance"); if (void 0 !== i) { var n = e[i], a = s[0]; o.prototype.hasOwnProperty(a) ? n[a].apply(n, s.slice(1)) : null === String(a).match(/^[$A-Z_][0-9A-Z_$]*$/i) ? (n.setFinalDate.call(n, a), n.start()) : t.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi, a)) } else new o(this, s[0], s[1]) }) } });